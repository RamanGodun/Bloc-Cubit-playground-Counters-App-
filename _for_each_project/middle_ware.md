# üìå –©–æ —Ç–∞–∫–µ Middleware?

**Middleware** (–ø–æ—Å–µ—Ä–µ–¥–Ω–∏–∫) ‚Äî —Ü–µ –ø—Ä–æ–≥—Ä–∞–º–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —è–∫–∏–π –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î –ø–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö –∞–±–æ –ø–æ–¥—ñ–π –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ —á–∞—Å—Ç–∏–Ω–∞–º–∏ –¥–æ–¥–∞—Ç–∫—É, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –æ–±—Ä–æ–±–ª—è—Ç–∏ —Ü—ñ –¥–∞–Ω—ñ –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —ó—Ö –ø–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ –≤–æ–Ω–∏ –¥–æ—Å—è–≥–Ω—É—Ç—å —Å–≤–æ—î—ó –∫—ñ–Ω—Ü–µ–≤–æ—ó —Ç–æ—á–∫–∏.

–£ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ **Flutter** —Ç–∞ **BLoC** —Ü–µ –º–µ—Ö–∞–Ω—ñ–∑–º, —è–∫–∏–π –¥–∞—î –∑–º–æ–≥—É –≤—Ç—Ä—É—á–∞—Ç–∏—Å—è —É –ø—Ä–æ—Ü–µ—Å –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–¥—ñ–π (`Event`) –∞–±–æ –∑–º—ñ–Ω —Å—Ç–∞–Ω—É (`State`), –Ω–µ –∑–º—ñ–Ω—é—é—á–∏ –ª–æ–≥—ñ–∫—É —Å–∞–º–æ–≥–æ `Bloc`.

---

## üìö –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è Middleware –∑ –ü–µ—Ä–µ–∫–ª–∞–¥–∞—á–µ–º
–£—è–≤–∏, —â–æ Middleware ‚Äî —Ü–µ –ø–µ—Ä–µ–∫–ª–∞–¥–∞—á, —è–∫–∏–π —Å—Ç–æ—ó—Ç—å –º—ñ–∂ –¥–≤–æ–º–∞ –ª—é–¥—å–º–∏, —â–æ —Ä–æ–∑–º–æ–≤–ª—è—é—Ç—å —Ä—ñ–∑–Ω–∏–º–∏ –º–æ–≤–∞–º–∏. –ö–æ–ª–∏ –æ–¥–Ω–∞ –ª—é–¥–∏–Ω–∞ —â–æ—Å—å –∫–∞–∂–µ (`Event`), –ø–µ—Ä–µ–∫–ª–∞–¥–∞—á –º–æ–∂–µ:
- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ (`Transform`) –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —Ü–µ –∫–æ—Ä–µ–∫—Ç–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (`Validation`).
- –í—ñ–¥—Ö–∏–ª–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (`Reject`).
- –î–æ–¥–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ –¥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (`Enhance`).

---

## üîç –ù–∞–≤—ñ—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω Middleware?

1. **–õ–æ–≥—É–≤–∞–Ω–Ω—è (Logging):** –°–ª—ñ–¥–∫—É–≤–∞–Ω–Ω—è –∑–∞ –≤—Å—ñ–º–∞ –ø–æ–¥—ñ—è–º–∏ —Ç–∞ —Å—Ç–∞–Ω–∞–º–∏ —É –¥–æ–¥–∞—Ç–∫—É.
2. **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ (Analytics):** –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —É –∑–æ–≤–Ω—ñ—à–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Firebase Analytics).
3. **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ (Error Handling):** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–æ–∫–∞–∑—É–≤–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å —á–∏ –ª–æ–∞–¥–µ—Ä—ñ–≤ –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö.
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π Loader:** –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è —Ç–∞ –≤–∏–º–∫–Ω–µ–Ω–Ω—è –ª–æ–∞–¥–µ—Ä–∞ –ø—Ä–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö –¥—ñ—è—Ö.
5. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (Authentication):** –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–µ–≤–Ω–æ—ó –ø–æ–¥—ñ—ó.

---

## üõ† –Ø–∫ Middleware –ø—Ä–∞—Ü—é—î —É BLoC?

### 1. –ü–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è –ø–æ–¥—ñ–π (`Event`) –ø–µ—Ä–µ–¥ –æ–±—Ä–æ–±–∫–æ—é
- –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ–¥—ñ—é –∞–±–æ –Ω–∞–≤—ñ—Ç—å –≤—ñ–¥—Ö–∏–ª–∏—Ç–∏ —ó—ó.

### 2. –ü–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—ñ–≤ (`State`) –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é —É UI
- –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–æ–¥–∞—Ç–∏ `isLoading` –ø—ñ–¥ —á–∞—Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É.

### 3. –†–µ–∞–≥—É–≤–∞–Ω–Ω—è –Ω–∞ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è (`Exception`) —É –ø—Ä–æ—Ü–µ—Å—ñ –æ–±—Ä–æ–±–∫–∏ –ø–æ–¥—ñ–π
- –ú–æ–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–º–∏–ª–∫–∏, –Ω–µ –≤–Ω–æ—Å—è—á–∏ –∑–º—ñ–Ω–∏ —É –ª–æ–≥—ñ–∫—É `Bloc`.

---

## üîß –ü—Ä–∏–∫–ª–∞–¥ Middleware –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ª–æ–∞–¥–µ—Ä–∞

```dart
import 'package:flutter_bloc/flutter_bloc.dart';
import 'app_settings_cubit.dart';

class GlobalLoaderMiddleware<Event, State> extends BlocMiddleware<Event, State> {
  final AppSettingsCubit appSettingsCubit;

  GlobalLoaderMiddleware({required this.appSettingsCubit});

  @override
  void onEvent(Event event, Emitter<State> emit, Bloc<Event, State> bloc) {
    if (event is ShowLoaderEvent) {
      appSettingsCubit.startLoading();
    } else if (event is HideLoaderEvent) {
      appSettingsCubit.stopLoading();
    }
    super.onEvent(event, emit, bloc);
  }
}
```

---

## üí° –†–µ–∞–ª—å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Middleware

1. **Redux Middleware:** –£ `Redux` –¥–ª—è Flutter (`flutter_redux`), Middleware –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö –¥—ñ–π (`Thunk`/`Saga`).
2. **Logger Middleware:** `BlocObserver` —É BLoC —Ñ–∞–∫—Ç–∏—á–Ω–æ —î –ø—Ä–∏–∫–ª–∞–¥–æ–º Middleware, —è–∫–∏–π –ª–æ–≥—É—î –≤—Å—ñ –ø–æ–¥—ñ—ó —Ç–∞ —Å—Ç–∞–Ω–∏.
3. **API Interceptor:** –£ `Dio` (HTTP –∫–ª—ñ—î–Ω—Ç) `Interceptor` –¥—ñ—î —è–∫ Middleware, —è–∫–∏–π –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç–∏ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.

---

## üöÄ –ü–µ—Ä–µ–≤–∞–≥–∏ Middleware

- **–ß–∏—Å—Ç–∏–π –∫–æ–¥:** –õ–æ–≥—ñ–∫–∞ `Loader`, `Logger` –∞–±–æ `Error Handler` –≤–∏–Ω–µ—Å–µ–Ω–∞ –∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ `Bloc`.
- **–ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –û–¥–∏–Ω Middleware –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –±–∞–≥–∞—Ç—å–º–∞ `Bloc`.
- **–ü—Ä–æ—Å—Ç–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** Middleware –º–æ–∂–Ω–∞ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º–æ –≤—ñ–¥ –æ—Å–Ω–æ–≤–Ω–æ—ó –ª–æ–≥—ñ–∫–∏ `Bloc`.

---

## üéØ –í–∏—Å–Ω–æ–≤–æ–∫

1. **Middleware** ‚Äî —Ü–µ –ø–æ—Ç—É–∂–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –ø–æ—Ç—ñ–∫ –ø–æ–¥—ñ–π —Ç–∞ —Å—Ç–∞–Ω—ñ–≤ —É –¥–æ–¥–∞—Ç–∫—É.
2. –í—ñ–Ω –æ—Å–æ–±–ª–∏–≤–æ –∫–æ—Ä–∏—Å–Ω–∏–π —É –≤–µ–ª–∏–∫–∏—Ö –¥–æ–¥–∞—Ç–∫–∞—Ö –∞–±–æ –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–¥—ñ—ó (`Loading`, `Error Handling`, `Analytics`).
3. –£ —Ç–≤–æ—î–º—É –≤–∏–ø–∞–¥–∫—É Middleware –¥–æ–∑–≤–æ–ª–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ `Loader`, —è–∫—â–æ –±—É–¥—å-—è–∫–∏–π `Bloc` –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å —É `LoadingState`.

